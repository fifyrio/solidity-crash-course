# ðŸŒ Solidityå…¨å±€å˜é‡æŽ¢ç´¢ä¹‹æ—…ï¼šåŒºå—é“¾ä¸–ç•Œçš„"å†…ç½®ä¼ æ„Ÿå™¨"

> "å…¨å±€å˜é‡å°±åƒæ˜¯åŒºå—é“¾ä¸–ç•Œé‡Œçš„å¤©æ°”é¢„æŠ¥å‘˜ï¼Œéšæ—¶å‘Šè¯‰ä½ çŽ°åœ¨æ˜¯å‡ ç‚¹ã€è°åœ¨æ•²é—¨ã€å¸¦äº†å¤šå°‘é’±ã€‚å®ƒä»¬æ˜¯Solidityç»™ä½ çš„å…è´¹'æƒ…æŠ¥ç½‘'ï¼" ðŸ•µï¸â€â™‚ï¸

## ðŸš€ å¼€åœºç™½ï¼šä»€ä¹ˆæ˜¯å…¨å±€å˜é‡ï¼Ÿ

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ ä½åœ¨ä¸€ä¸ªæ™ºèƒ½è±ªå®…é‡Œï¼Œæˆ¿å­é‡Œæœ‰å„ç§ä¼ æ„Ÿå™¨ï¼šé—¨é“ƒå‘Šè¯‰ä½ è°æ¥äº†ï¼Œæ—¶é’Ÿå‘Šè¯‰ä½ çŽ°åœ¨å‡ ç‚¹ï¼Œé“¶è¡Œå¡å‘Šè¯‰ä½ è´¦æˆ·ä½™é¢ã€‚Solidityçš„å…¨å±€å˜é‡å°±æ˜¯æ™ºèƒ½åˆçº¦é‡Œçš„è¿™äº›"ä¼ æ„Ÿå™¨"ï¼Œéšæ—¶ä¸ºä½ æä¾›åŒºå—é“¾ä¸–ç•Œçš„å®žæ—¶ä¿¡æ¯ï¼

## ðŸ“š ç›®å½•
1. [å…¨å±€å˜é‡æ¦‚è§ˆ](#æ¦‚è§ˆ)
2. [æ¶ˆæ¯ç›¸å…³å˜é‡](#æ¶ˆæ¯å˜é‡)  
3. [åŒºå—ç›¸å…³å˜é‡](#åŒºå—å˜é‡)
4. [äº¤æ˜“ç›¸å…³å˜é‡](#äº¤æ˜“å˜é‡)
5. [å®žæˆ˜æ¼”ç»ƒ](#å®žæˆ˜)

---

## ðŸ” å…¨å±€å˜é‡æ¦‚è§ˆ {#æ¦‚è§ˆ}

å…¨å±€å˜é‡æ˜¯Solidityå†…ç½®çš„ç‰¹æ®Šå˜é‡ï¼Œå®ƒä»¬ï¼š
- ðŸ“¡ **éšæ—¶å¯ç”¨**ï¼šä¸éœ€è¦å£°æ˜Žï¼Œç›´æŽ¥ä½¿ç”¨
- ðŸ”„ **è‡ªåŠ¨æ›´æ–°**ï¼šæ¯æ¬¡äº¤æ˜“éƒ½ä¼šæ›´æ–°
- ðŸ’¡ **ä¿¡æ¯ä¸°å¯Œ**ï¼šæä¾›åŒºå—é“¾å’Œäº¤æ˜“çš„å…³é”®ä¿¡æ¯
- ðŸ’° **å…è´¹ä½¿ç”¨**ï¼šè¯»å–å…¨å±€å˜é‡å‡ ä¹Žä¸æ¶ˆè€—Gas

---

## ðŸ“¨ æ¶ˆæ¯ç›¸å…³å˜é‡ {#æ¶ˆæ¯å˜é‡}

è¿™äº›å˜é‡å‘Šè¯‰ä½ "è°æ¥äº†"å’Œ"å¸¦äº†ä»€ä¹ˆ"ï¼š

### `msg.sender` - è®¿å®¢èº«ä»½è¯ ðŸ†”
```solidity
contract WhoIsIt {
    address public lastVisitor;
    
    function knockKnock() public {
        lastVisitor = msg.sender; // è®°å½•æ˜¯è°è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°
    }
    
    function amITheOwner(address owner) public view returns(bool) {
        return msg.sender == owner; // æ£€æŸ¥è°ƒç”¨è€…æ˜¯ä¸æ˜¯ä¸»äºº
    }
}
```
**ç”¨é€”**ï¼š
- æƒé™æŽ§åˆ¶ï¼ˆåªå…è®¸ç‰¹å®šåœ°å€æ“ä½œï¼‰
- è®°å½•æ“ä½œè€…èº«ä»½
- å®žçŽ°"åªæœ‰æˆ‘èƒ½ç”¨"çš„åŠŸèƒ½

### `msg.value` - çº¢åŒ…é‡‘é¢ ðŸ’°
```solidity
contract PiggyBank {
    uint256 public totalSavings;
    
    // payableå…³é”®å­—è¡¨ç¤ºè¿™ä¸ªå‡½æ•°èƒ½æŽ¥æ”¶ä»¥å¤ªå¸
    function deposit() public payable {
        totalSavings += msg.value; // msg.valueæ˜¯å‘é€çš„ä»¥å¤ªå¸æ•°é‡
    }
    
    function checkDonation() public payable returns(string memory) {
        if (msg.value >= 1 ether) {
            return "å“‡ï¼å¤§é¢æèµ ï¼";
        } else if (msg.value > 0) {
            return "è°¢è°¢ä½ çš„çˆ±å¿ƒï¼";
        } else {
            return "åªæ˜¯æ¥çœ‹çœ‹ï¼Ÿ";
        }
    }
}
```
**ç”¨é€”**ï¼š
- å¤„ç†ä»¥å¤ªå¸è½¬è´¦
- å®žçŽ°ä»˜è´¹åŠŸèƒ½
- åˆ¤æ–­æ”¯ä»˜é‡‘é¢

### `msg.data` - å®Œæ•´æ¶ˆæ¯å†…å®¹ ðŸ“‹
```solidity
contract DataInspector {
    bytes public lastCallData;
    
    function saveCallData() public {
        lastCallData = msg.data; // ä¿å­˜å®Œæ•´çš„è°ƒç”¨æ•°æ®
    }
}
```

---

## â° åŒºå—ç›¸å…³å˜é‡ {#åŒºå—å˜é‡}

è¿™äº›å˜é‡å‘Šè¯‰ä½ "çŽ°åœ¨æ˜¯ä»€ä¹ˆæ—¶å€™"å’Œ"åœ¨å“ªä¸ªåŒºå—"ï¼š

### `block.timestamp` - åŒºå—é“¾æ—¶é’Ÿ â°
```solidity
contract TimeKeeper {
    uint256 public startTime;
    uint256 public constant SECONDS_IN_DAY = 24 * 60 * 60; // ä¸€å¤©çš„ç§’æ•°
    
    constructor() {
        startTime = block.timestamp; // è®°å½•åˆçº¦åˆ›å»ºæ—¶é—´
    }
    
    function howLongHasItBeen() public view returns(uint256) {
        return block.timestamp - startTime; // è®¡ç®—ç»è¿‡äº†å¤šå°‘ç§’
    }
    
    function isItWorkingHours() public view returns(bool) {
        uint256 hourOfDay = (block.timestamp / 3600) % 24; // è®¡ç®—å½“å‰å°æ—¶
        return hourOfDay >= 9 && hourOfDay < 17; // 9ç‚¹åˆ°17ç‚¹ç®—å·¥ä½œæ—¶é—´
    }
}
```
**æ³¨æ„**ï¼š`block.timestamp` çš„ç²¾åº¦å¤§çº¦æ˜¯15ç§’ï¼Œä¸è¦ç”¨å®ƒåšéœ€è¦ç²¾ç¡®è®¡æ—¶çš„åŠŸèƒ½ï¼

### `block.number` - åŒºå—é«˜åº¦è®¡æ•°å™¨ ðŸ“Š
```solidity
contract BlockCounter {
    uint256 public birthBlock;
    
    constructor() {
        birthBlock = block.number; // è®°å½•åˆçº¦è¯žç”Ÿçš„åŒºå—
    }
    
    function howManyBlocksPassed() public view returns(uint256) {
        return block.number - birthBlock; // è®¡ç®—ç»è¿‡äº†å¤šå°‘ä¸ªåŒºå—
    }
}
```

### `block.coinbase` - çŸ¿å·¥åœ°å€ â›ï¸
```solidity
contract MinerTracker {
    address public currentMiner;
    
    function getCurrentMiner() public {
        currentMiner = block.coinbase; // èŽ·å–å½“å‰åŒºå—çš„çŸ¿å·¥åœ°å€
    }
}
```


---

## ðŸŽ¯ å®žæˆ˜æ¼”ç»ƒ {#å®žæˆ˜}

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„"æ™ºèƒ½é—¨é”"åˆçº¦ï¼Œç»¼åˆè¿ç”¨å„ç§å…¨å±€å˜é‡ï¼š

```solidity
// SPDX-License-Identifier: MIT
// SPDX-License-Identifier: MIT
pragma solidity 0.8.30;

contract GlobalVar {
    function getGlobalVar() external view returns (address, uint, uint, address) {
        address sender = msg.sender;        
        uint tsp = block.timestamp;
        uint blockNum = block.number;
        address adr = block.coinbase;
        return (sender, tsp,blockNum,adr);
    }
}
```


## ðŸŽ‰ æ€»ç»“

æ­å–œä½ ï¼çŽ°åœ¨ä½ å·²ç»æŽŒæ¡äº†Solidityå…¨å±€å˜é‡çš„æ ¸å¿ƒçŸ¥è¯†ï¼š

### ðŸ”‘ å…³é”®æ”¶èŽ·
- âœ… **msg.sender**ï¼šçŸ¥é“æ˜¯è°åœ¨è°ƒç”¨å‡½æ•°
- âœ… **msg.value**ï¼šçŸ¥é“å‘é€äº†å¤šå°‘ä»¥å¤ªå¸  
- âœ… **block.timestamp**ï¼šçŸ¥é“çŽ°åœ¨æ˜¯ä»€ä¹ˆæ—¶é—´
- âœ… **block.number**ï¼šçŸ¥é“å½“å‰åŒºå—é«˜åº¦

### ðŸ’¡ å®žç”¨æŠ€å·§
1. **æƒé™æŽ§åˆ¶**ï¼šç”¨ `msg.sender` å®žçŽ°"åªæœ‰æˆ‘èƒ½ç”¨"
2. **æ”¯ä»˜å¤„ç†**ï¼šç”¨ `msg.value` å¤„ç†ä»¥å¤ªå¸è½¬è´¦
3. **æ—¶é—´é€»è¾‘**ï¼šç”¨ `block.timestamp` å®žçŽ°å®šæ—¶åŠŸèƒ½



è®°ä½ï¼šå…¨å±€å˜é‡æ˜¯ä½ çš„å¾—åŠ›åŠ©æ‰‹ï¼Œå–„ç”¨å®ƒä»¬èƒ½è®©ä½ çš„æ™ºèƒ½åˆçº¦æ›´åŠ æ™ºèƒ½å’Œå®‰å…¨ï¼ ðŸŽ¯
