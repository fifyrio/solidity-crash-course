# ğŸ¯ Solidityå‡½æ•°å¤§å†’é™©ï¼šä»èœé¸Ÿåˆ°"å‡½æ•°ä¾ "

> "å‡½æ•°å°±åƒæ˜¯åŒºå—é“¾ä¸–ç•Œé‡Œçš„æ‰“å·¥äººï¼Œä½ ç»™å®ƒå‚æ•°å½“å·¥èµ„ï¼Œå®ƒç»™ä½ è¿”å›å€¼å½“æˆæœã€‚æœ‰æ—¶å€™è¿˜ä¼šå·å·æ”¹å˜åˆçº¦çŠ¶æ€ï¼Œå°±åƒæ‰“å·¥äººå¶å°”æ‘¸é±¼ä¸€æ ·ï¼" ğŸ˜„

## ğŸš€ å¼€åœºç™½ï¼šä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ

å¦‚æœæŠŠæ™ºèƒ½åˆçº¦æ¯”ä½œä¸€ä¸ªç¥å¥‡çš„é­”æ³•å·¥å‚ï¼Œé‚£ä¹ˆå‡½æ•°å°±æ˜¯å·¥å‚é‡Œçš„å„ç§æœºå™¨ã€‚ä½ å¾€æœºå™¨é‡ŒæŠ•å…¥åŸææ–™ï¼ˆå‚æ•°ï¼‰ï¼Œæœºå™¨å—¡å—¡ä½œå“ï¼ˆæ‰§è¡Œä»£ç ï¼‰ï¼Œæœ€åç»™ä½ åå‡ºäº§å“ï¼ˆè¿”å›å€¼ï¼‰ã€‚

## ğŸ“š ç›®å½•
1. [å‡½æ•°çš„åŸºæœ¬è¯­æ³•](#åŸºæœ¬è¯­æ³•)
2. [å‡½æ•°çš„å¯è§æ€§ä¿®é¥°ç¬¦](#å¯è§æ€§)
3. [å‡½æ•°çš„çŠ¶æ€å¯å˜æ€§](#çŠ¶æ€å¯å˜æ€§)
4. [å‡½æ•°ä¿®é¥°ç¬¦](#ä¿®é¥°ç¬¦)
5. [å‡½æ•°é‡è½½](#é‡è½½)
6. [å®æˆ˜æ¼”ç»ƒ](#å®æˆ˜)

---

## ğŸ”§ åŸºæœ¬è¯­æ³• {#åŸºæœ¬è¯­æ³•}

### å‡½æ•°çš„æ ‡å‡†æ ¼å¼

```solidity
function å‡½æ•°å(å‚æ•°ç±»å‹ å‚æ•°å) å¯è§æ€§ çŠ¶æ€ä¿®é¥°ç¬¦ returns(è¿”å›ç±»å‹) {
    // å‡½æ•°ä½“
    return è¿”å›å€¼;
}
```

çœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Ÿåˆ«æ€•ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥æ¥ï¼š

```solidity
// æœ€ç®€å•çš„å‡½æ•°ï¼šä»€ä¹ˆéƒ½ä¸è¦ï¼Œä»€ä¹ˆéƒ½ä¸ç»™
function sayHello() public pure returns(string memory) {
    return "Hello, Blockchain!";
}

// ç¨å¾®å¤æ‚ç‚¹ï¼šç»™æˆ‘ä¸¤ä¸ªæ•°ï¼Œæˆ‘è¿˜ä½ ä¸€ä¸ªå’Œ
function add(uint256 a, uint256 b) public pure returns(uint256) {
    return a + b;
}

// å†å¤æ‚ç‚¹ï¼šå¤šä¸ªè¿”å›å€¼ï¼ˆåƒæ‰¹å‘ä¸€æ ·ï¼‰
function getNameAndAge() public pure returns(string memory, uint256) {
    return ("Alice", 25);
}
```

### ğŸ’¡ å°è´´å£«
- å‡½æ•°åå»ºè®®ç”¨é©¼å³°å‘½åæ³•ï¼Œå°±åƒéª†é©¼çš„é©¼å³°ä¸€æ ·èµ·èµ·ä¼ä¼
- å‚æ•°å¯ä»¥æœ‰å¾ˆå¤šä¸ªï¼Œä½†åˆ«å¤ªè´ªå¿ƒï¼Œå¤ªå¤šäº†åˆçº¦ä¼š"æ¶ˆåŒ–ä¸è‰¯"

---

## ğŸ‘€ å¯è§æ€§ä¿®é¥°ç¬¦ {#å¯è§æ€§}

å‡½æ•°çš„å¯è§æ€§å°±åƒä½ æœ‹å‹åœˆçš„éšç§è®¾ç½®ï¼Œå†³å®šäº†è°èƒ½çœ‹åˆ°ã€è°èƒ½è°ƒç”¨ï¼š

### `public` - å¼€æ”¾å‹äººæ ¼
```solidity
function publicFunction() public pure returns(string memory) {
    return "å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯publicå‡½æ•°ï¼Œè°éƒ½å¯ä»¥è°ƒç”¨æˆ‘ï¼";
}
```
- åˆçº¦å†…éƒ¨å¯ä»¥è°ƒç”¨ âœ…
- åˆçº¦å¤–éƒ¨å¯ä»¥è°ƒç”¨ âœ…
- ç»§æ‰¿çš„åˆçº¦å¯ä»¥è°ƒç”¨ âœ…
- å°±åƒæœ‹å‹åœˆè®¾ç½®ä¸º"æ‰€æœ‰äººå¯è§"

### `private` - ç¤¾æå‹äººæ ¼
```solidity
function privateFunction() private pure returns(string memory) {
    return "æˆ‘æ˜¯privateå‡½æ•°ï¼Œåªæœ‰æœ¬åˆçº¦èƒ½ç”¨æˆ‘...";
}
```
- åªæœ‰å½“å‰åˆçº¦å¯ä»¥è°ƒç”¨ âœ…
- å°±è¿ç»§æ‰¿çš„åˆçº¦éƒ½ä¸è¡Œ âŒ
- åƒæ˜¯åªæœ‰è‡ªå·±èƒ½çœ‹çš„ç§å¯†æ—¥è®°

### `internal` - å®¶æ—å‹äººæ ¼
```solidity
function internalFunction() internal pure returns(string memory) {
    return "æˆ‘æ˜¯internalå‡½æ•°ï¼Œå®¶æ—å†…éƒ¨å¯ä»¥ç”¨æˆ‘";
}
```
- å½“å‰åˆçº¦å¯ä»¥è°ƒç”¨ âœ…
- ç»§æ‰¿çš„åˆçº¦å¯ä»¥è°ƒç”¨ âœ…
- å¤–éƒ¨è°ƒç”¨ä¸è¡Œ âŒ
- åƒæ˜¯å®¶æ—ç¾¤èŠï¼Œåªæœ‰å®¶äººèƒ½çœ‹

### `external` - ç¤¾äº¤è¾¾äººå‹äººæ ¼
```solidity
function externalFunction() external pure returns(string memory) {
    return "æˆ‘æ˜¯externalå‡½æ•°ï¼Œä¸“é—¨æ¥å¾…å¤–å®¢ï¼";
}
```
- åªèƒ½ä»åˆçº¦å¤–éƒ¨è°ƒç”¨ âœ…
- åˆçº¦å†…éƒ¨è°ƒç”¨éœ€è¦ç”¨ `this.externalFunction()` 
- åƒæ˜¯ä¸“é—¨æ¥å¾…å®¢æˆ·çš„å‰å°

---

## ğŸ”„ çŠ¶æ€å¯å˜æ€§ {#çŠ¶æ€å¯å˜æ€§}

è¿™äº›ä¿®é¥°ç¬¦å†³å®šäº†å‡½æ•°å¯¹åŒºå—é“¾çŠ¶æ€çš„"ç ´ååŠ›"ï¼š

### `pure` - ä½›ç³»å‡½æ•° ğŸ§˜â€â™‚ï¸
```solidity
function pureMath(uint256 a, uint256 b) public pure returns(uint256) {
    return a * b + 42; // åªåšè®¡ç®—ï¼Œä¸ç¢°ä»»ä½•çŠ¶æ€
}
```
- ä¸è¯»å–åˆçº¦çŠ¶æ€
- ä¸ä¿®æ”¹åˆçº¦çŠ¶æ€
- å°±åƒæ•°å­¦å…¬å¼ï¼Œç»™å®šè¾“å…¥æ°¸è¿œå¾—åˆ°ç›¸åŒè¾“å‡º
- Gasè´¹æœ€ä¾¿å®œï¼

### `view` - åƒç“œç¾¤ä¼— ğŸ‘€
```solidity
contract Example {
    uint256 public count = 0;
    
    function viewCount() public view returns(uint256) {
        return count; // åªçœ‹ä¸åŠ¨æ‰‹
    }
}
```
- å¯ä»¥è¯»å–åˆçº¦çŠ¶æ€
- ä¸èƒ½ä¿®æ”¹åˆçº¦çŠ¶æ€
- åƒæ˜¯åªèƒ½çœ‹ä¸èƒ½æ‘¸çš„åšç‰©é¦†å±•å“

### æ— ä¿®é¥°ç¬¦ - ç ´åç‹ ğŸ’ª
```solidity
contract Example {
    uint256 public count = 0;
    
    function incrementCount() public {
        count++; // æˆ‘è¦æ”¹å˜ä¸–ç•Œï¼
    }
}
```
- å¯ä»¥è¯»å–çŠ¶æ€
- å¯ä»¥ä¿®æ”¹çŠ¶æ€
- å¯ä»¥å‘é€ä»¥å¤ªå¸
- Gasè´¹æœ€é«˜ï¼Œå› ä¸ºè¦å†™å…¥åŒºå—é“¾

### `payable` - æ”¶é’±å‡½æ•° ğŸ’°
```solidity
function donate() public payable {
    // è¿™ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶ä»¥å¤ªå¸
    // msg.value å°±æ˜¯å‘é€çš„é‡‘é¢
}
```

---

## ğŸ›¡ï¸ å‡½æ•°ä¿®é¥°ç¬¦ {#ä¿®é¥°ç¬¦}

ä¿®é¥°ç¬¦(modifier)å°±åƒå‡½æ•°çš„ä¿é•–ï¼Œåœ¨å‡½æ•°æ‰§è¡Œå‰åè¿›è¡Œæ£€æŸ¥ï¼š

```solidity
contract AccessControl {
    address public owner;
    
    constructor() {
        owner = msg.sender;
    }
    
    // å®šä¹‰ä¿®é¥°ç¬¦ï¼šåªæœ‰è€æ¿æ‰èƒ½æ‰§è¡Œ
    modifier onlyOwner() {
        require(msg.sender == owner, "ä½ ä¸æ˜¯è€æ¿ï¼Œä¸èƒ½æ‰§è¡Œï¼");
        _; // è¿™é‡Œä¼šæ‰§è¡Œè¢«ä¿®é¥°çš„å‡½æ•°
    }
    
    // ä½¿ç”¨ä¿®é¥°ç¬¦
    function sensitiveOperation() public onlyOwner {
        // åªæœ‰é€šè¿‡onlyOwneræ£€æŸ¥æ‰èƒ½æ‰§è¡Œè¿™é‡Œçš„ä»£ç 
    }
}
```

### ä¿®é¥°ç¬¦çš„é«˜çº§ç”¨æ³•

```solidity
// å¸¦å‚æ•°çš„ä¿®é¥°ç¬¦
modifier onlyAfter(uint256 time) {
    require(block.timestamp >= time, "æ—¶å€™æœªåˆ°ï¼");
    _;
}

// å¤šä¸ªä¿®é¥°ç¬¦ç»„åˆä½¿ç”¨
function criticalFunction() 
    public 
    onlyOwner 
    onlyAfter(1640995200) // 2022å¹´1æœˆ1æ—¥ä¹‹åæ‰èƒ½æ‰§è¡Œ
{
    // è¶…çº§é‡è¦çš„æ“ä½œ
}
```

---

## ğŸ”„ å‡½æ•°é‡è½½ {#é‡è½½}

Solidityæ”¯æŒå‡½æ•°é‡è½½ï¼ŒåŒä¸€ä¸ªåå­—å¯ä»¥æœ‰ä¸åŒçš„"äººè®¾"ï¼š

```solidity
contract Overloading {
    // ç‰ˆæœ¬1ï¼šå•ä¸ªå‚æ•°
    function greet(string memory name) public pure returns(string memory) {
        return string(abi.encodePacked("Hello, ", name));
    }
    
    // ç‰ˆæœ¬2ï¼šä¸¤ä¸ªå‚æ•°
    function greet(string memory firstName, string memory lastName) 
        public pure returns(string memory) {
        return string(abi.encodePacked("Hello, ", firstName, " ", lastName));
    }
}
```

---

## ğŸ¯ å®æˆ˜æ¼”ç»ƒ {#å®æˆ˜}

è®©æˆ‘ä»¬å†™ä¸€ä¸ªç®€å•çš„é“¶è¡Œåˆçº¦æ¥ç»ƒä¹ æ‰€å­¦çš„çŸ¥è¯†ï¼š

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract SimpleBank {
    mapping(address => uint256) private balances;
    address public owner;
    
    constructor() {
        owner = msg.sender;
    }
    
    // ä¿®é¥°ç¬¦ï¼šåªæœ‰è´¦æˆ·æ‰€æœ‰è€…
    modifier onlyAccountOwner(address account) {
        require(msg.sender == account, "ä¸æ˜¯ä½ çš„è´¦æˆ·ï¼Œåˆ«ä¹±åŠ¨ï¼");
        _;
    }
    
    // ä¿®é¥°ç¬¦ï¼šåªæœ‰é“¶è¡Œè€æ¿
    modifier onlyOwner() {
        require(msg.sender == owner, "ä½ ä¸æ˜¯é“¶è¡Œè€æ¿ï¼");
        _;
    }
    
    // å­˜æ¬¾å‡½æ•° - payableç±»å‹ï¼Œå¯ä»¥æ¥æ”¶ä»¥å¤ªå¸
    function deposit() public payable {
        require(msg.value > 0, "å­˜ç‚¹é’±å†æ¥å§ï¼");
        balances[msg.sender] += msg.value;
    }
    
    // æŸ¥çœ‹ä½™é¢ - viewç±»å‹ï¼Œåªè¯»ä¸å†™
    function getBalance() public view returns(uint256) {
        return balances[msg.sender];
    }
    
    // æŸ¥çœ‹æŒ‡å®šè´¦æˆ·ä½™é¢ - é‡è½½ç‰ˆæœ¬
    function getBalance(address account) public view returns(uint256) {
        return balances[account];
    }
    
    // å–æ¬¾å‡½æ•° - ä¿®æ”¹çŠ¶æ€
    function withdraw(uint256 amount) public onlyAccountOwner(msg.sender) {
        require(balances[msg.sender] >= amount, "ä½™é¢ä¸è¶³ï¼Œæƒ³å¾—ç¾ï¼");
        balances[msg.sender] -= amount;
        payable(msg.sender).transfer(amount);
    }
    
    // ç´§æ€¥æå–æ‰€æœ‰èµ„é‡‘ - åªæœ‰è€æ¿èƒ½ç”¨
    function emergencyWithdrawAll() public onlyOwner {
        payable(owner).transfer(address(this).balance);
    }
    
    // è·å–åˆçº¦æ€»ä½™é¢ - pureç±»å‹ç¤ºä¾‹
    function getContractBalance() public view returns(uint256) {
        return address(this).balance;
    }
}
```

---

## ğŸ‰ æ€»ç»“

æ­å–œä½ ï¼ç°åœ¨ä½ å·²ç»æŒæ¡äº†Solidityå‡½æ•°çš„æ ¸å¿ƒæ¦‚å¿µï¼š

- âœ… **åŸºæœ¬è¯­æ³•**ï¼šfunctionå…³é”®å­—æ˜¯ä½ çš„å¥½æœ‹å‹
- âœ… **å¯è§æ€§**ï¼špublicã€privateã€internalã€externalå„æœ‰åƒç§‹
- âœ… **çŠ¶æ€å¯å˜æ€§**ï¼špureã€viewã€payableï¼ŒGasè´¹å¤§ä¸åŒ
- âœ… **ä¿®é¥°ç¬¦**ï¼šå‡½æ•°çš„è´´èº«ä¿é•–
- âœ… **å‡½æ•°é‡è½½**ï¼šä¸€ä¸ªåå­—ï¼Œå¤šç§ç©æ³•

### ğŸ† è¿›é˜¶å°è´´å£«

1. **Gasä¼˜åŒ–**ï¼šèƒ½ç”¨pureå°±åˆ«ç”¨viewï¼Œèƒ½ç”¨viewå°±åˆ«ä¿®æ”¹çŠ¶æ€
2. **å®‰å…¨ç¬¬ä¸€**ï¼šé‡è¦å‡½æ•°ä¸€å®šè¦åŠ ä¿®é¥°ç¬¦ä¿æŠ¤
3. **å‘½åè§„èŒƒ**ï¼šå¥½çš„å‡½æ•°åèƒœè¿‡åƒè¡Œæ³¨é‡Š
4. **è¿”å›å€¼**ï¼šå–„ç”¨å¤šè¿”å›å€¼ï¼Œä½†åˆ«æ»¥ç”¨

### ğŸš€ ä¸‹ä¸€æ­¥

ç°åœ¨ä½ å·²ç»æ˜¯"å‡½æ•°ä¾ "äº†ï¼æ¥ä¸‹æ¥å¯ä»¥å­¦ä¹ ï¼š
- äº‹ä»¶(Events)ï¼šåŒºå—é“¾çš„å¹¿æ’­ç³»ç»Ÿ
- é”™è¯¯å¤„ç†ï¼šrequireã€assertã€revertä¸‰å…„å¼Ÿ
- ç»§æ‰¿ï¼šé¢å‘å¯¹è±¡çš„æ™ºèƒ½åˆçº¦

ç»§ç»­åŠ æ²¹ï¼ŒåŒºå—é“¾ä¸–ç•Œç­‰ç€ä½ å»å¾æœï¼ğŸŒŸ

---

*"ä»£ç åƒä¸‡è¡Œï¼Œå®‰å…¨ç¬¬ä¸€è¡Œã€‚å‡½æ•°ä¸è§„èŒƒï¼Œéƒ¨ç½²ä¸¤è¡Œæ³ªã€‚"* ğŸ˜‰
